<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../partials/head'); %>
  <title>Games With History - Home</title>
</head>

<body>
  <%- include('../partials/header'); %>

  <main>
    <% if(message != "") { %>
    <section id="message">
      <p><%= message %></p>
      <span id="close">&times;</span>
    </section>
    <% } %>

    <section class="controllers-container">
      <form action="/shuffle" method="post">
        <button><img src="/img/random-solid.svg" alt="random-solid" /></button>
      </form>
      <form action="/create" method="get">
        <button>
          <img src="/img/plus-solid.svg" alt="plus-solid" class="add-button" />
        </button>
      </form>
    </section>

    <section class="content-container">
      <% games.forEach( (game, index) => { %>
      <article key=<%=index%> class="container">
        <div class="outsideCircle">
          <div class="insideCircle">
            <img src="<%= game.imagem %>" alt=<%= game.nome %> />
          </div>
        </div>

        <form action="edit/<%= index%>" method="get">
          <button type="submit">
            <img src="/img/edit-solid.svg" alt="edit-solid" id="edit-button" />
          </button>
        </form>

        <button onclick="onOpen(<%= index%>)">
          <img src="/img/trash-solid.svg" alt="trash-solid" id="delete-button" />
        </button>

        <form action="/details/<%= index%>" method="get">
          <button class="card">

            <h3><%= game.nome%></h3>

          </button>
        </form>

        <section class="modal" id="modal-<%= index%>">
          <article class="modal-overlay">
            <div class="modal-content">
              <span>
                <h2>Do you really want to delete this game?</h2>
              </span>
              <span class="hstack">
                <form action="/delete/<%= index%>" method="post">
                  <button type="submit" id="confirm-delete-button">Yes</button>
                </form>
                <button onclick="onClose(<%= index%>)" id="cancel-delete-button">No</button>
              </span>
            </div>
          </article>
        </section>
      
      </article>
      <% }) %>
    
    </section>
  </main>

  <script src="/js/script.js"></script>
</body>

</html>